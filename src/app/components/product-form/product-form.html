<form [formGroup]="productForm" (ngSubmit)="onSubmit()">
  <div class="row">
    <div class="col-md-6">
      <div class="form-group">
        <label for="name">Название товара *</label>
        <input
          type="text"
          id="name"
          class="form-control"
          formControlName="name"
          [class.is-invalid]="isFieldInvalid('name')"
          placeholder="Введите название товара"
        />
        @if (isFieldInvalid('name')) {
        <div class="invalid-feedback">
          @for (error of getFieldErrors('name'); track error){
          <div>
            {{ error }}
          </div>
          }
        </div>
        }
      </div>
    </div>

    <div class="col-md-6">
      <div class="form-group">
        <label for="category">Категория *</label>
        <input
          type="text"
          id="category"
          class="form-control"
          formControlName="category"
          [class.is-invalid]="isFieldInvalid('category')"
          placeholder="Введите категорию"
        />
        @if (isFieldInvalid('category')) {
        <div class="invalid-feedback">
          @for (error of getFieldErrors('category'); track error){
          <div>
            {{ error }}
          </div>
          }
        </div>
        }
      </div>
    </div>
  </div>

  <div class="form-group">
    <label for="description">Описание *</label>
    <textarea
      id="description"
      class="form-control"
      rows="3"
      formControlName="description"
      [class.is-invalid]="isFieldInvalid('description')"
      placeholder="Введите описание товара"
    ></textarea>
    @if (isFieldInvalid('description')) {
    <div class="invalid-feedback">
      @for (error of getFieldErrors('description'); track error){
      <div>
        {{ error }}
      </div>
      }
    </div>
    }
  </div>

  <div class="row">
    <div class="col-md-6">
      <div class="form-group">
        <label for="price">Цена *</label>
        <div class="input-group">
          <input
            type="number"
            id="price"
            class="form-control no-spinners"
            formControlName="price"
            [class.is-invalid]="isFieldInvalid('price')"
            placeholder="0"
            min="0"
          />
          <div class="input-group-append">
            <span class="input-group-text">$</span>
          </div>
        </div>
        @if (isFieldInvalid('price')) {
        <div class="invalid-feedback">
          @for (error of getFieldErrors('price'); track error){
          <div>
            {{ error }}
          </div>
          }
        </div>
        }
      </div>
    </div>

    <div class="col-md-6">
      <div class="form-group">
        <label for="stock">Количество на складе *</label>
        <input
          type="number"
          id="stock"
          class="form-control no-spinners"
          formControlName="stock"
          [class.is-invalid]="isFieldInvalid('stock')"
          placeholder="0"
          min="0"
        />
        @if (isFieldInvalid('stock')) {
        <div class="invalid-feedback">
          @for (error of getFieldErrors('stock'); track error){
          <div>
            {{ error }}
          </div>
          }
        </div>
        }
      </div>
    </div>
  </div>

  <div class="form-group mt-4">
    <button
      type="submit"
      class="btn btn-primary mr-2"
      [disabled]="productForm.invalid || productForm.pristine"
    >
      {{ product ? 'Обновить' : 'Создать' }}
    </button>
    <button type="button" class="btn btn-secondary" (click)="onCancel()">Отмена</button>
  </div>
</form>
